{% extends 'base.html' %}
{% block content %}
<div class="container mt-4">
	<h2>Resultado da Geração para {{ usuario.username }}</h2>

	{% if result.tipo == 'modelo' %}
	<div class="card">
		<div class="card-body">
			<h5 class="card-title">
				Treino sugerido: {{ result.plano.treino.nome }}
			</h5>
			<p class="card-text">
				Objetivo: {{ result.plano.treino.get_objetivo_display }}
			</p>
			<p class="card-text">
				Frequência: {{ result.plano.frequencia_semanal }}x por semana — Duração:
				{{ result.plano.duracao_semanas }} semanas
			</p>
			<p class="text-muted">
				Modelo usado: {% if result.usou_nn %}Neural Network{% else %}Heurística{% endif %} — Score: {% if result.score is not None %}{{ result.score|floatformat:2 }}{% else %}N/A{% endif %}
			</p>
			{% if result.accuracy %}
			<p class="text-success">
				Acurácia do modelo (teste): {{ result.accuracy|floatformat:2 }}%
			</p>
			{% endif %}
			<form method="post" action="{% url 'treinos_salvar' %}" class="mt-3">
				{% csrf_token %}
				<input type="hidden" name="usuario_id" value="{{ result.plano.usuario.id }}" />
				<input type="hidden" name="treino_id" value="{{ result.plano.treino.id }}" />
				<input type="hidden" name="frequencia" value="{{ result.plano.frequencia_semanal }}" />
				<input type="hidden" name="duracao" value="{{ result.plano.duracao_semanas }}" />
				<button type="submit" class="btn btn-primary">Salvar Plano</button>
			</form>
		</div>
	</div>
	{% else %}
	<div class="alert alert-info">
		<p>{{ result.descricao }}</p>
		<p class="text-muted">Modelo usado: {% if result.usou_nn %}Neural Network{% else %}Heurística{% endif %} — Score: {% if result.score is not None %}{{ result.score|floatformat:2 }}{% else %}N/A{% endif %}</p>
		{% if result.accuracy %}
		<p class="text-success">Acurácia do modelo (teste): {{ result.accuracy|floatformat:2 }}%</p>
		{% endif %}
	</div>
	{% endif %}

	<a href="{% url 'treinos_gerador' %}" class="btn btn-secondary mt-3">Voltar</a>
</div>
{% endblock %}
